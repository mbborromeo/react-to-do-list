(this["webpackJsonpreact-to-do-list"]=this["webpackJsonpreact-to-do-list"]||[]).push([[0],{27:function(e,t,n){},32:function(e,t,n){e.exports=n(63)},37:function(e,t,n){},57:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(28),o=n.n(l),i=(n(37),n(8)),r=n(1),u=n(13),d=n(7),s=n(29),m=n(30),b=n(16),f=n.n(b),p="https://jsonplaceholder.typicode.com/todos",E=function(){function e(){Object(s.a)(this,e)}return Object(m.a)(e,[{key:"getList",value:function(){return f.a.jsonp(p,{timeout:2e3})}},{key:"getDetail",value:function(e){return f.a.jsonp("".concat(p,"/").concat(e),{timeout:2e3})}}]),e}();var j=function(e){var t=e.addFunction,n=Object(a.useState)(""),l=Object(d.a)(n,2),o=l[0],i=l[1],r=Object(a.useCallback)((function(e){e.preventDefault(),o&&(t(o),i(""))}),[o,t]);return c.a.createElement("form",null,c.a.createElement("input",{type:"text",value:o,onChange:function(e){return i(e.target.value)}}),c.a.createElement("input",{type:"submit",value:"Add",onClick:r}),c.a.createElement("input",{type:"button",value:"Clear",onClick:function(){return i("")}}))};n(57);var O=function(){var e=Object(a.useState)(void 0),t=Object(d.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)({key:"id",direction:"ascending"}),r=Object(d.a)(o,2),s=r[0],m=r[1],b=Object(a.useState)(!1),f=Object(d.a)(b,2),p=f[0],O=f[1];console.log("list state",n);var k=Object(a.useMemo)((function(){return new E}),[]),v=Object(a.useCallback)((function(e){return n.findIndex((function(t){return t.id===e}))}),[n]),g=Object(a.useCallback)((function(e){console.log("completeToDo id",e);var t=v(e);console.log("completeToDo indexOfItem",t);var a=Object(u.a)(n);a[t].completed?a[t].completed=!1:a[t].completed=!0,l(a)}),[n,v]),y=Object(a.useCallback)((function(e){console.log("deleteToDo id",e);var t=v(e);console.log("deleteToDo indexOfItem",t);var a=n.filter((function(t){return t.id!==e}));l(a)}),[n,v]),C=Object(a.useCallback)((function(){var e=n.map((function(e){return e.id})).sort((function(e,t){return e-t}));return e[e.length-1]}),[n]),h=Object(a.useCallback)((function(e){var t={userId:99,id:C()+1,completed:!1,title:e},a=[].concat(Object(u.a)(n),[t]);l(a)}),[n,C]),D=Object(a.useCallback)((function(e){var t;t=s.key===e&&"ascending"===s.direction?"descending":"ascending",m({key:e,direction:t})}),[s]);Object(a.useEffect)((function(){console.log("List useEffect"),k.getList().then((function(e){l(e)})).catch((function(e){console.error("axios.jsonp CATCH",e),O(!0)})).finally((function(){}))}),[k]);var x=Object(a.useMemo)((function(){if(n){console.log("sorting...");var e=Object(u.a)(n);return e.sort((function(e,t){return e[s.key]<t[s.key]?"completed"===s.key?"ascending"===s.direction?1:-1:"ascending"===s.direction?-1:1:e[s.key]>t[s.key]?"completed"===s.key?"ascending"===s.direction?-1:1:"ascending"===s.direction?1:-1:e.id<t.id?-1:e.id>t.id?1:0})),e}}),[n,s]);return console.log("sortedResults",x),x?x.length>0?c.a.createElement("div",null,c.a.createElement("h1",null,"TO DO"),c.a.createElement(j,{addFunction:h}),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("button",{type:"button",className:"id"===s.key?s.direction:"",onClick:function(){return D("id")}},"ID")),c.a.createElement("td",null,c.a.createElement("button",{type:"button",className:"title"===s.key?s.direction:"",onClick:function(){return D("title")}},"Title")),c.a.createElement("td",null,c.a.createElement("button",{type:"button",id:"completed",className:"completed"===s.key?s.direction:"",onClick:function(){return D("completed")}},"Completed")))),c.a.createElement("tbody",null,x.map((function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,c.a.createElement(i.b,{to:"/detail/".concat(e.id),"data-id":e.id,className:e.completed?"completed":""},e.id)),c.a.createElement("td",null,c.a.createElement(i.b,{to:"/detail/".concat(e.id),"data-id":e.id,className:e.completed?"completed":""},e.title)),c.a.createElement("td",null,c.a.createElement("button",{type:"button",onClick:function(){return g(e.id)}},e.completed?"Mark as Incomplete":"Mark as Completed"),c.a.createElement("button",{type:"button",onClick:function(){return y(e.id)}},"X")))}))))):c.a.createElement("div",null,"No results to display"):p?c.a.createElement("div",null,"Error loading"):c.a.createElement("div",null,"Loading...")};n(27);var k=function(e){var t=e.match,n=Object(a.useState)(void 0),l=Object(d.a)(n,2),o=l[0],r=l[1],u=Object(a.useState)({}),s=Object(d.a)(u,2),m=s[0],b=s[1],f=Object(a.useState)(!1),p=Object(d.a)(f,2),j=p[0],O=p[1],k=Object(a.useState)(!1),v=Object(d.a)(k,2),g=v[0],y=v[1],C=Object(a.useMemo)((function(){return new E}),[]),h=Object(a.useCallback)((function(){return t.params.id}),[t.params.id]);return Object(a.useEffect)((function(){r(h()),o&&C.getDetail(o).then((function(e){b(e),O(!0)})).catch((function(e){console.error("axios.jsonp CATCH",e),y(!0)})).finally((function(){}))}),[C,o,h]),j&&Object.keys(m).length>0?c.a.createElement("div",null,c.a.createElement("span",null,"Detail"," ",o,"for"," ",m.title,"is"," ",m.completed),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(i.b,{to:"/",className:"button back"},"< Back")):j&&0===Object.keys(m).length?c.a.createElement("div",null,"No detail to display"):g?c.a.createElement("div",null,"Error loading"):c.a.createElement("div",null,"Loading...")};var v=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(i.a,null,c.a.createElement(r.c,null,c.a.createElement(r.a,{path:"/",exact:!0,component:O}),c.a.createElement(r.a,{path:"/detail/:id",exact:!0,component:k}))))};o.a.render(c.a.createElement(v,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.5857a235.chunk.js.map